# 计算机网络

- 四网融合
  - 电信网、互联网、广播电视网、电网

- 简单的网络
  - 计算机网路由若干节点和连接这些节点的链路构成
  - 互连网：通用名词，泛指多个计算机网络互连构成的网络
  - 互联网：inter网专有名词，指全球最大的，开放的、众多网络构成的互连网

- 互联网的组成
  - 边缘部分：用户直接使用的主机
  - 核心部分：为边缘部分提供服务的路由器和网络

- 电路交换的主要特点
  - 在通话时间内，通话的连个用户始终占用端到端的资源

- 分组交换的特点
  - 分组交换采用存储转发技术，每一个数据块称为一个报文，保温包括  首部  和  数据部分，首部包含了源地址和目的地址

- 三种交换比较
  - 电路交换————整个报文的比特流连续的从原点直达终点
  - 报文交换————整个报文先传送到相邻节点，全部存储下来后查找转发表转发到下一个节点
  - 分组交换————单个分组（整个报文的一部分），传送的相邻节点，存储下来检查后转发到下一个节点

- 全国最大的共用计算机网络
  - 中国电信互联网
  - 中国联通互联网
  - 中国移动互联网
  - 中国教育和科研计算机网络
  - 中国科学技术网

- 计算机网络的定义
  - 计算机网络主要是由一些通用的、可编程的硬件互联而成，这些可编程的硬件能够用来传输多种不同的类型的数据

- 计算机网络的分类
  - 按照网络的作用范围分类
    - 广域网    WAN
    - 城域网    MAN
    - 局域网    LAN
    - 个人区域网  PAN
  - 按照网络的使用者分类
    - 公用网
    - 专用网

- 计算机网络的性能指标
  - 带宽      原本指某个带宽信号具有的频带宽度    单位 bit/s
  - 吞吐量    单位时间内通过某个网络的实际数据量
  - 时延      
    - 发送时延  主机或者路由器发送数据帧所需要的时间
    - 传播时延  电磁波在信道中传播一定距离所需要花费的时间
    - 处理时延  主机或路由器在收到分组进行处理所需要的时间
    - 排队时延  分组进入路由器后在输入队列中排队等待处理的时间

```shell
    总时延 = 发送时延 + 传播时延 + 处理时延 + 排队时延
    发送时延 = 数据帧长度 / 发送速率
    传播时延 = 信道长度 / 传播速率
```

  - 时延带宽积    表示带宽可以容纳多少bit     
    - 时延带宽积=传播时延*带宽
  - 往返时间RTT
  - 利用率    包括信道利用率和网络利用率
    
- 计算机网络体系结构
  - ISO七层网络模型（1——7）
    - 物理层
    - 数据链路
    - 网络层
    - 运输层
    - 会话层
    - 表示层
    - 应用层
- 协议三要素
  - 语法、语义、同步
- 计算机网络体系结构----七层模型
  - 物理层：物理层上传输的数据单位是比特
  - 数据链路（链路层）：将网络层交付的IP数据报组装成数据帧，在两个相邻节点上传送数据帧
  - 网络层：为分组交换网络上的不同主机提供通信服务
  - 运输层：负责两台主机中进程之间的通信，提供数据传输服务
    - TCP：传输控制协议————面向连接的、可靠的数据传输服务
    - UDP：用户数据传输协议————尽最大努力传输数据，不保证数据可靠性
  - 会话层：。。。。
  - 表示层：。。。。
  - 应用层：通过应用程序之间的交互完成特定网络应用
- 网络分层结构中，相邻两层之间的关系
  - 向上层提供服务，实现本层的协议，使用下层提供的服务
- TCP/IP体系结构的表示方法以及使用的相关协议
  - TCP/IP协议而可以为各种各样的应用提供服务，同时可以在各式各样的网络构成的互联网上运行
        
  - TCP/IP协议族
    - 不是指的TCP/ip协议而是值得网络传输过程中的相关的协议的集合
    - 各层包含的协议
            应用层       ---->     应用程序
            传输层       ---->     TCP  UDP
            网际层       ---->     ICMP IP IGMP ARP RARP
            网络接口层   ---->      网络接口


- 物理层的特性
  - 电器特性：指明在接口电缆上各条线上的电压范围
  - 机械特性：规定接口的尺寸、形状、引脚数、排列....
  - 功能特性：某条线上的某一电平信号的意义
  - 过程特新：指明对于不同功能的各种可能时间出现顺序
- 数据通信系统模型
    源点————产生传输的数据
    发送器————编码源点产生的数据在传输系统中传输
    接收器————接收传输系统中发送的数据
    终点————终点从接收器中取出传输过来的数据比特流
- 信号的分类
  - 模拟信号、数字信号
- 单工、半双工、全双工
| 通信方式                   | 说明                                 |
| -------------------------- | ------------------------------------ |
| 信道                       | 传输信息的媒体                       |
| 单向通信（单工通信）       | 只能有一个方向的通信，没有反方向     |
| 双向交替通信（半双工通信） | 双发都可以发送信息，但是不能同时发送 |
| 双向同时通信（全双工通信） | 双方可以同时发送接受数据             |
- 数字信号的常用编码方式
  - 不归零制：正电平代表1，负电平代表0
  - 归零制：正脉冲代表1.负脉冲代表0
  - 曼彻斯特编码：位周期中心处向上跳变代表0，向下跳变代表1
  - 差分曼彻斯特编码：位开始处没有跳变代表1，有跳变代表0

- 基本的带通调制方法
  - 调幅、调频、调相
- 引导型传输媒体
    1.双绞线
        UTP：无屏蔽双绞线
        STP：屏蔽双绞线 
    2.同轴电缆
    3.光纤
- 频分复用：所有的用户在相同的时间占用不同的带宽资源
- 时分复用：所有用户在不同的的时间占用相同的带宽资源
- 波分复用（WDM）
- 码分复用
- 非对称数字用户线（ADSL）
    下行宽带远大于上行宽带
- FTTx  宽带接入方案
    FTTH    光纤到户
    FTTB    大楼
    FTTC    路边
- 数据链路和帧
    链路：从一个节点到相邻节点的物理线路     
        物理成传输数据单元————IP数据流
        数据链路层传输数据单元————帧
        网络层数据单元————IP数据报
- 交换机的转发模式
    1.直接转发：交换机边接收，边边检测，一但检测到目的地址就立即转发，不管数据是否出错
    2.存储转发：交换机接受完整个数据，并对数据进行差错处理，如果数据无误，再根据目的地址转发
    3.改进直接：在接收到前64个字节并检查无误后，转发到对应的目的地址

    生产环境：采用直接转发的方式，如果出错率超过了预设的阈值，则采用存储转发方式
- 三个基本问题
    封装成帧：在一段数据的前后分别添加首部和尾部       
        数据部分的长度上限————最大传输单元MTU
        帧开始符：SOH
        帧结束符：EOT
    透明传输：在发送端的数据链路层出现控制符SOH或EOT时在其前面添加ESC转义符，接收方的数据链路层遇到ESC的时候去掉ESC
31.PPP协议（点对点协议）
    需求：简单、封装成帧、透明性、多种网络层协议、多种链路类型。。。。。
32.网络拓扑结构
    星型、环形、总线、分布式、树形、网状、蜂窝状
33.CSMA/CD协议
    多点接入
    载波监听
    碰撞检测
34.争用期
    重传16次仍然不能成功的帧直接丢弃，向高层报告
    如果前64个字节没有发生冲突则不会发生冲突
35.IPV4
    单播、多播（一对全体）、广播
36.交换机一般都是全双工

37.网络层：简单灵活、无连接、只尽最大可能努力交付数据服务，不能保证数据的质量
38.端口
    逻辑端口：8080      （1——2^16-1）   1-65535
    物理端口：F 0/1     F:类型  0:模块号    1：端口号
39：IP地址=网络号+主机号
    (32位) 
    A类地址：0-127      8+24
    B类地址：127-191    16+16
    C类地址：192.223    24+8

    子网中主机数量：2^x-2   x主机号位数
    IP地址全0：网络上表示本地主机
    IP地址全1：只在本网络上进行转发
    
40.物理地址和IP地址的区别    
    物理地址：数据链路层和物理层使用的地址
    IP地址：网络层以及以上的层使用的地址



                                             |<--首部-->|----------|

                                  |<--首部-->|------TCP报文--------|
    
    数据链路层          |<--首部-->|<------------IP数据报----------->|<--尾部-->|
41.IP数据报32位
    1.版本4位
    2.首部长度4位
    3.区分服务8位 ———— 没啥用
    4.总长度16位   ———— 首部和数据之和
    5.标识16位  ———— 数据分片之后相同标识的数据数据包合并在一起
    6.标志3位   ———— 第一位没意义   MF=1 后面还有分片   DF=1 不允许分片
    7.片偏移13位———— 片偏移以8个字节（64个2进制位）为偏移单位
    8.生存时间8位————经过路由器的数量
    9.协议8位   ———— 数据使用的协议  
    10.首部校验和   16位——————只校验数据报的首部，不包括数据部分
42.子网
    划分子网的优点
        1.减少IP地址的浪费
        2.使网络的组织更加灵活
        3.便于维护和管理

    3级IP地址：
        IP地址::=网络号+子网号+主机号
        子网掩码位数就是网络位数
            将A类地址的子网掩码增大到16位，即将A类网络划分为256个B类大小网络，
            再将子网掩码增大到24位，即将每个B类网络划分为256个C类大小的子网
    
    判断两个IP地址是否属于同一个子网：
        将他们的IP地址以及掩码分别转换为2进制然后在进行与运算，
        如果结果相等则在同一个子网，如果不相等则不在同一个子网
    判断一个IP地址是否有子网：
        判断IP地址属于A类还是B类还是C类
        A类掩码不超过16位，B类掩码不超过24位
        子网的个数位查过部分转10进制后的数字
43.IPV6 128位
    4个16进制数一组（一个16进制数占4位），共8组

    1.版本 4位
    2.通信量类 8位
    3.流标号    20位
    4.有效载荷长度  16位    ———— 除去基本首部以外的字节数
    5.下一个首部 8位
    6.跳数限制  8位 ——— 类似于生存时间
    7.源地址    128位
    8.目的地址  128位

    单播
    多播
    任播    ———— 交给一组计算机中其中的一个

    零省略  ————   数字前面的零可以省略
    零压缩  ————   一连串的0可以由一对冒号代替---任一地址只能使用一次

    ：：    当前主机
    ：：1   环回地址


44.网络层   ————    主机之间，端到端的通信，差错检测
    运输层  ————    应用程序之间

45.TCP报文的首部
    1.源端口和目的端口  各2字节
    2.序号  4字节   
    3.确认号    4字节   期望收到的下一个报文段的第一个数据字节的序号
    4.数据偏移  4字节   指出TCP报文的数据段距离起始位置有短圆
    5.保留  6位
    6.紧急URG   URG=1时，紧急指针有效
    7.确认号   ACK=1生效
    8.推送
    9.复位 RST=1 时  释放连接重新连接
    10.同步SYN      SYN=1 ACK=0 表示请求连接    SYN=1 ACK=1 同意报文段中的连接
    11.FIN终止   FIN=1时表示报文发送完毕，请求释放连接
    12.窗口 2字节   窗口值作为接受方让发送方设置其发送窗口的依据
    13.校验和 2字节
    14.紧急指针 
    15.选项 40字节

 


ARP：地址解析服务
RARP：反向地址解析协议
ICMP：网际控制报文服务
IGMP：网际组管理协议
SMTP：简单邮件传输协议  :25
TFTP:简单文件传输协议   :69
https:安全套接网络传输协议  :43
TCP：传输控制协议————面向连接的、可靠的数据传输服务
DHCP：动态主机配置协议
OSPF：开放式最短路径优先协议
RPC：远程过程调用协议

UDP：用户数据传输协议————尽最大努力传输数据，不保证数据可靠性
UTP：无屏蔽双绞线
STP：屏蔽双绞线 
FTTH：光纤到户
FTTB：大楼
FTTC：路边
MTU：最大传输单元
ADSL：非对称数字用户线